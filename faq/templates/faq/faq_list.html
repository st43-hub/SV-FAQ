{% extends 'base.html' %}
{% block content %}

<!-- âœ… êµ¬ì—­(Area) í•„í„° ë²„íŠ¼ -->
<div style="margin-bottom: 20px; display: flex; gap: 0.5rem; flex-wrap: wrap;">
  <a href="/?{% if request.GET.category %}category={{ request.GET.category }}&{% endif %}{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}area=" class="btn-light">ì „ì²´</a>
  {% for code in area_codes %}
    <a href="/?{% if request.GET.category %}category={{ request.GET.category }}&{% endif %}{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}area={{ code }}" class="btn-light {% if request.GET.area == code %}btn-active{% endif %}">{{ code }}</a>
  {% endfor %}
</div>

<!-- ğŸ” í•„í„° + ì •ë ¬ + ê²€ìƒ‰ ì˜ì—­ -->
<form method="get" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; align-items: center;">
  <div style="flex: 2; min-width: 200px;">
    <input type="text" name="search" placeholder="ì§ˆë¬¸ ë˜ëŠ” ë‹µë³€ ê²€ìƒ‰..." value="{{ request.GET.search }}" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #d8b4fe;" />
  </div>
  <div style="flex: 1; min-width: 140px;">
    <select name="category" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #d8b4fe;">
      <option value="">ì „ì²´</option>
      <option value="ë¶„ë¥˜" {% if request.GET.category == "ë¶„ë¥˜" %}selected{% endif %}>ë¶„ë¥˜</option>
      <option value="ê°€ë ¤ì§" {% if request.GET.category == "ê°€ë ¤ì§" %}selected{% endif %}>ê°€ë ¤ì§</option>
      <option value="ìŠ¤í”Œë¼ì¸" {% if request.GET.category == "ìŠ¤í”Œë¼ì¸" %}selected{% endif %}>ìŠ¤í”Œë¼ì¸</option>
      <option value="ê¸°íƒ€" {% if request.GET.category == "ê¸°íƒ€" %}selected{% endif %}>ê¸°íƒ€</option>
    </select>
  </div>
  <div style="flex: 1; min-width: 140px;">
    <select name="sort" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #d8b4fe;">
      <option value="-id" {% if current_sort == "-id" %}selected{% endif %}>ìµœì‹ ìˆœ</option>
      <option value="id" {% if current_sort == "id" %}selected{% endif %}>ì˜¤ë˜ëœìˆœ</option>
      <option value="category" {% if current_sort == "category" %}selected{% endif %}>ì¹´í…Œê³ ë¦¬ìˆœ</option>
      <option value="area" {% if current_sort == "area" %}selected{% endif %}>êµ¬ì—­ìˆœ</option>
    </select>
  </div>
  <div>
    <button type="submit" class="btn-light" style="height: 100%;">ê²€ìƒ‰</button>
  </div>
</form>

<!-- ğŸ“‹ FAQ ì¶œë ¥ ì˜ì—­ -->
{% for category, faq_list in grouped_faqs.items %}
  <div style="margin-bottom: 48px;">
    <h3 style="margin-top: 24px; color: #4b0082; text-align: left;">ğŸ“ {{ category }}</h3>
    {% for faq in faq_list %}
      {% include "faq/faq_card.html" %}
    {% endfor %}
  </div>
{% empty %}
  <p class="faq-empty">âŒ í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” FAQê°€ ì—†ìŠµë‹ˆë‹¤.</p>
{% endfor %}

{% endblock %}
