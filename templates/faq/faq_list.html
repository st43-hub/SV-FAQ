{% extends 'base.html' %}
{% block content %}

<!-- âœ… ì „ì²´ ë ˆì´ì•„ì›ƒ -->
<div class="min-h-screen bg-gray-900 py-10 px-4 sm:px-6 lg:px-8">
  <div class="max-w-5xl mx-auto space-y-10">

    <!-- âœ… êµ¬ì—­(Area) í•„í„° ë²„íŠ¼ -->
    <div class="flex flex-wrap gap-2 mb-6">
      <a href="/?{% if request.GET.category %}category={{ request.GET.category }}&{% endif %}{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}area="
         class="px-4 py-2 rounded-lg border {% if not request.GET.area %}bg-purple-500 text-white{% else %}bg-gray-800 text-gray-300{% endif %}">
        ì „ì²´
      </a>
      {% for code in area_codes %}
      <a href="/?{% if request.GET.category %}category={{ request.GET.category }}&{% endif %}{% if request.GET.search %}search={{ request.GET.search }}&{% endif %}area={{ code }}"
         class="px-4 py-2 rounded-lg border {% if request.GET.area == code %}bg-purple-500 text-white{% else %}bg-gray-800 text-gray-300{% endif %}">
        {{ code }}
      </a>
      {% endfor %}
    </div>

    <!-- ğŸ” í•„í„° + ì •ë ¬ + ê²€ìƒ‰ ì˜ì—­ -->
    <form method="get" class="flex flex-wrap gap-4 items-center mb-8">
      <input type="text" name="search" placeholder="ì§ˆë¬¸ ë˜ëŠ” ë‹µë³€ ê²€ìƒ‰..." value="{{ request.GET.search }}"
             class="flex-2 min-w-[200px] px-4 py-2 rounded-lg border border-purple-400 bg-gray-800 text-gray-200 placeholder-gray-400">

      <select name="category" class="flex-1 min-w-[140px] px-4 py-2 rounded-lg border border-purple-400 bg-gray-800 text-gray-200">
        <option value="">ì „ì²´</option>
        <option value="ë¶„ë¥˜" {% if request.GET.category == "ë¶„ë¥˜" %}selected{% endif %}>ë¶„ë¥˜</option>
        <option value="ê°€ë ¤ì§" {% if request.GET.category == "ê°€ë ¤ì§" %}selected{% endif %}>ê°€ë ¤ì§</option>
        <option value="ìŠ¤í”Œë¼ì¸" {% if request.GET.category == "ìŠ¤í”Œë¼ì¸" %}selected{% endif %}>ìŠ¤í”Œë¼ì¸</option>
        <option value="ê¸°íƒ€" {% if request.GET.category == "ê¸°íƒ€" %}selected{% endif %}>ê¸°íƒ€</option>
      </select>

      <select name="sort" class="flex-1 min-w-[140px] px-4 py-2 rounded-lg border border-purple-400 bg-gray-800 text-gray-200">
        <option value="-id" {% if current_sort == "-id" %}selected{% endif %}>ìµœì‹ ìˆœ</option>
        <option value="id" {% if current_sort == "id" %}selected{% endif %}>ì˜¤ë˜ëœìˆœ</option>
        <option value="category" {% if current_sort == "category" %}selected{% endif %}>ì¹´í…Œê³ ë¦¬ìˆœ</option>
        <option value="area" {% if current_sort == "area" %}selected{% endif %}>êµ¬ì—­ìˆœ</option>
      </select>

      <button type="submit" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg">
        ê²€ìƒ‰
      </button>
    </form>

    <!-- ğŸ“‹ FAQ ì¶œë ¥ ì˜ì—­ -->
    {% for category, faq_list in grouped_faqs.items %}
    <div class="space-y-6">
      <h3 class="text-xl text-purple-400 font-semibold border-b border-gray-700 pb-2">ğŸ“ {{ category }}</h3>
      {% for faq in faq_list %}
        {% include "faq/faq_card.html" %}
      {% endfor %}
    </div>
    {% empty %}
    <p class="text-center text-gray-400">âŒ í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” FAQê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endfor %}

  </div>
</div>

{% endblock %}
